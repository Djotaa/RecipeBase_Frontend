<h1 class="text-center my-5 accent">{{ isEdit ? "Edit recipe" : "Add new recipe" }}</h1>
<div class="container mx-auto row justify-content-around">
    <div class="col-12 col-lg-6 mb-2 p-2">
        
            <div class="row">
                <form *ngIf="isReady" [formGroup]="form">
                <div class="col-12">
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Title</mat-label>
                        <input matInput placeholder="Chocolate cake" formControlName="title">
                        <mat-error *ngIf="form.get('title') as control">
                            <ng-container *ngIf="control.hasError('required')">
                                This field is required
                            </ng-container>
                            <ng-container *ngIf="control.hasError('minlength')">
                                Minimum 3 characters
                            </ng-container>
                            <ng-container *ngIf="control.hasError('maxlength')">
                                Maximum 50 characters
                            </ng-container>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-12">
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Prep Time</mat-label>
                        <input matInput placeholder="1 hour 15 minutes" formControlName="prepTime">
                        <mat-error *ngIf="form.get('prepTime') as control">
                            <ng-container *ngIf="control.hasError('required')">
                                This field is required
                            </ng-container>
                            <ng-container *ngIf="control.hasError('minlength')">
                                Minimum 3 characters
                            </ng-container>
                            <ng-container *ngIf="control.hasError('maxlength')">
                                Maximum 35 characters
                            </ng-container>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-12">
                    <mat-form-field appearance="fill" class="example-full-width">
                        <mat-label>Recipe group</mat-label>
                        <mat-select formControlName="categoryId">
                            <mat-option value="">Select recipe group...</mat-option>
                            <mat-option *ngFor="let group of recipeGroups" [value]="group.id">{{ group.name }}</mat-option>
                        </mat-select>
                        <mat-error *ngIf="form.get('categoryId') as control">
                            <ng-container *ngIf="control.hasError('required')">
                                Recipe group is required
                            </ng-container>
                        </mat-error>
                    </mat-form-field>
                </div>
            </form>
                <div class="col-12 mb-3">
                    <h3 class="secondary-text">Image</h3>
                    <input #file type="file" class="imageFile" (change)="setFilePath(file.value)" />
                </div>
                <div class="col-12">
                    <h3 class="secondary-text">Ingredients</h3> 

                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Ingredient</mat-label>
                        <input matInput [(ngModel)]="ingredient">
                    </mat-form-field>
                    <button mat-raised-button class="btnAccent d-block mb-2" (click)="$event.preventDefault(); pushIngredient()">Add Ingredent</button>
                    <ol>
                        <ng-container *ngFor="let ing of ingredients;index as i">
                            <li>{{ ing }} <a href="#" class="text-danger" (click)="$event.preventDefault(); removeIngredient(i)">Remove</a></li>
                        </ng-container>
                    </ol>

                </div>
                <div class="col-12">
                    <h3 class="secondary-text">Directions</h3>
                    <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Direction</mat-label>
                        <input matInput [(ngModel)]="direction">
                    </mat-form-field>
                    <button mat-raised-button class="btnAccent d-block mb-2" (click)="$event.preventDefault(); pushDirection()">Add Direction</button>
                    <ol>
                        <ng-container *ngFor="let dir of directions;index as i">
                            <li>{{ dir }} <a href="#" class="text-danger" (click)="$event.preventDefault(); removeDirection(i)">Remove</a></li>
                        </ng-container>
                    </ol>

                </div>
                <div class="col-12">
                    <p><mark>*</mark> Required fields</p>
                </div>
                <div class="col">
                    <button mat-raised-button class="btnAccent d-block mx-auto" [disabled]="form.invalid || (!isEdit && !filePath) || (directions.length == 0 || ingredients.length == 0)" (click)="send()">{{ isEdit ? "Edit" : "Add" }}</button>
                    <div class="text-danger pt-3" *ngIf="errorMsg" [innerHTML]="errorMsg"></div>
                </div>
            </div>
    </div>
</div>